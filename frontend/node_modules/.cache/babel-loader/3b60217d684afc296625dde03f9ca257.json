{"ast":null,"code":"var _jsxFileName = \"E:\\\\blog\\\\frontend\\\\src\\\\pages\\\\post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { BlogContainer } from \"../components/sidebar/styles/sidebarstyle\";\nimport Sidebar from \"../components/sidebar/sidebar\";\nimport { PostContainer, PostTitle, Input, AddImg, Btn, PostDesc, PostImg } from \"./styles/postStyle\";\nimport { post } from \"./actions/postactions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = () => {\n  _s();\n\n  const [photo, setPhoto] = useState('');\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const dispatch = useDispatch();\n  const userInfo = useSelector(state => state.blog.userInfo);\n\n  const uploadFile = async e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append(\"image\", file);\n    const {\n      data\n    } = await axios.post('/api/upload', bodyFormData, {\n      headers: {\n        \"Content-Type\": \"multiformat/formdata\",\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    setPhoto(`/images/${data.slice(24, data.length)}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(post({\n      username: userInfo.username,\n      title,\n      description,\n      photo\n    }, userInfo));\n  };\n\n  return /*#__PURE__*/_jsxDEV(BlogContainer, {\n    children: [/*#__PURE__*/_jsxDEV(PostContainer, {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(PostImg, {\n        src: photo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PostTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          two: true,\n          type: \"file\",\n          name: \"image\",\n          onChange: uploadFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(AddImg, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          type: \"text\",\n          placeholder: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(Btn, {\n          type: \"submit\",\n          children: \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PostDesc, {\n        onChange: e => setDescription(e.target.value),\n        value: description,\n        placeholder: \"Tell your story...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Post, \"pseosW9ueOwXOm6YJ0apF8oJvOQ=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["E:/blog/frontend/src/pages/post.js"],"names":["React","useState","axios","useSelector","useDispatch","BlogContainer","Sidebar","PostContainer","PostTitle","Input","AddImg","Btn","PostDesc","PostImg","post","Post","photo","setPhoto","title","setTitle","description","setDescription","dispatch","userInfo","state","blog","uploadFile","e","file","target","files","bodyFormData","FormData","append","data","headers","Authorization","token","slice","length","submitHandler","preventDefault","username","value"],"mappings":"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","sourcesContent":["import React,{useState} from \"react\"\r\nimport axios from \"axios\"\r\nimport {useSelector,useDispatch} from \"react-redux\"\r\nimport { BlogContainer } from \"../components/sidebar/styles/sidebarstyle\"\r\nimport Sidebar from \"../components/sidebar/sidebar\"\r\nimport {PostContainer,PostTitle,Input,AddImg,Btn,PostDesc,PostImg} from \"./styles/postStyle\"\r\nimport {post} from \"./actions/postactions\"\r\nconst Post = () =>{\r\n    const [photo,setPhoto] = useState('')\r\n    const [title,setTitle] = useState('')\r\n    const [description,setDescription] = useState('')\r\n    const dispatch = useDispatch()\r\n    const userInfo = useSelector(state=>state.blog.userInfo)\r\nconst uploadFile = async(e) =>{\r\n    const file = e.target.files[0]\r\n    const bodyFormData = new FormData()\r\n    bodyFormData.append(\"image\",file)\r\n    const {data} = await axios.post('/api/upload',bodyFormData,{\r\nheaders:{\r\n    \"Content-Type\":\"multiformat/formdata\",\r\n    Authorization:`Bearer ${userInfo.token}`\r\n}\r\n    })\r\n    setPhoto(`/images/${data.slice(24,data.length)}`)\r\n}\r\nconst submitHandler = (e) =>{\r\n    e.preventDefault()\r\ndispatch(post({\r\n    username:userInfo.username,\r\n    title,\r\n    description,\r\n    photo\r\n},userInfo))\r\n}\r\n    return(<BlogContainer>\r\n        <PostContainer onSubmit = {submitHandler}>\r\n            <PostImg src = {photo}  />\r\n            <PostTitle>\r\n<Input two type = \"file\" name = \"image\" onChange = {uploadFile} />\r\n<AddImg  />\r\n<Input value = {title} onChange = {(e)=>setTitle(e.target.value)} type = \"text\" placeholder = \"Title\" />\r\n<Btn type = \"submit\">Publish</Btn>\r\n            </PostTitle>\r\n            <PostDesc onChange = {(e)=>setDescription(e.target.value)} value = {description}\r\n                placeholder = \"Tell your story...\" >\r\n            </PostDesc>\r\n        </PostContainer>\r\n        <Sidebar />\r\n        </BlogContainer>\r\n    )\r\n}\r\nexport default Post"]},"metadata":{},"sourceType":"module"}