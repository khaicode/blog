{"ast":null,"code":"var _jsxFileName = \"E:\\\\blog\\\\frontend\\\\src\\\\pages\\\\post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { PostContainer, PostTitle, Input, AddImg, Btn, PostDesc, PostImg, Line, Select, Option } from \"./styles/postStyle\";\nimport { post } from \"./actions/postactions\";\nimport { Message } from \"./styles/loginstyle\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Post = () => {\n  _s();\n\n  const [photo, setPhoto] = useState('');\n  const [title, setTitle] = useState('');\n  const [success, setSuccess] = useState('');\n  const [description, setDescription] = useState('');\n  const dispatch = useDispatch();\n  const blog = useSelector(state => state.blog.post);\n  const userInfo = useSelector(state => state.blog.userInfo);\n  const navigate = useNavigate();\n\n  const uploadFile = async e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append(\"image\", file);\n    const {\n      data\n    } = await axios.post('/api/upload', bodyFormData, {\n      headers: {\n        \"Content-Type\": \"multiformat/formdata\",\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    setPhoto(`/images/${data.slice(24, data.length)}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(post({\n      username: userInfo.username,\n      title,\n      description,\n      photo\n    }, userInfo));\n    setSuccess(\"Your story has been posted successfully!\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [success && /*#__PURE__*/_jsxDEV(Message, {\n      two: true,\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(PostContainer, {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(PostImg, {\n        src: photo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PostTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Line, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            two: true,\n            type: \"file\",\n            name: \"image\",\n            onChange: uploadFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(AddImg, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          type: \"text\",\n          placeholder: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(Btn, {\n          type: \"submit\",\n          children: \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PostDesc, {\n        onChange: e => setDescription(e.target.value),\n        value: description,\n        placeholder: \"Tell your story...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        children: [/*#__PURE__*/_jsxDEV(Option, {\n          value: \"sports\",\n          children: \"Sports\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"life\",\n          children: \"Life\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"tech\",\n          children: \"Tech\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"style\",\n          children: \"Style\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"music\",\n          children: \"Music\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"cinema\",\n          children: \"Cinema\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"entertainment\",\n          children: \"Entertainment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Post, \"zJU83dFtJtiR4F9pO5UaxSfG6h0=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useNavigate];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["E:/blog/frontend/src/pages/post.js"],"names":["React","useState","axios","useSelector","useDispatch","PostContainer","PostTitle","Input","AddImg","Btn","PostDesc","PostImg","Line","Select","Option","post","Message","useNavigate","Post","photo","setPhoto","title","setTitle","success","setSuccess","description","setDescription","dispatch","blog","state","userInfo","navigate","uploadFile","e","file","target","files","bodyFormData","FormData","append","data","headers","Authorization","token","slice","length","submitHandler","preventDefault","username","value"],"mappings":"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","sourcesContent":["import React,{useState} from \"react\"\r\nimport axios from \"axios\"\r\nimport {useSelector,useDispatch} from \"react-redux\"\r\nimport {PostContainer,PostTitle,Input,AddImg,Btn,PostDesc,PostImg,Line,Select,Option} from \"./styles/postStyle\"\r\nimport {post} from \"./actions/postactions\"\r\nimport { Message } from \"./styles/loginstyle\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nconst Post = () =>{\r\n    const [photo,setPhoto] = useState('')\r\n    const [title,setTitle] = useState('')\r\n    const [success,setSuccess] = useState('')\r\n    const [description,setDescription] = useState('')\r\n    const dispatch = useDispatch()\r\n    const blog = useSelector(state=>state.blog.post)\r\n    const userInfo = useSelector(state=>state.blog.userInfo)\r\nconst navigate = useNavigate()\r\nconst uploadFile = async(e) =>{\r\n    const file = e.target.files[0]\r\n    const bodyFormData = new FormData()\r\n    bodyFormData.append(\"image\",file)\r\n    const {data} = await axios.post('/api/upload',bodyFormData,{\r\nheaders:{\r\n    \"Content-Type\":\"multiformat/formdata\",\r\n    Authorization:`Bearer ${userInfo.token}`\r\n}\r\n    })\r\n    setPhoto(`/images/${data.slice(24,data.length)}`)\r\n}\r\nconst submitHandler = (e) =>{\r\n    e.preventDefault()\r\ndispatch(post({\r\n    username:userInfo.username,\r\n    title,\r\n    description,\r\n    photo\r\n},userInfo))\r\nsetSuccess(\"Your story has been posted successfully!\")\r\n\r\n}\r\n    return(<>\r\n    {success && <Message two >{success}</Message>}\r\n        <PostContainer onSubmit = {submitHandler}>\r\n            <PostImg src = {photo}  />\r\n\r\n            <PostTitle>\r\n                <Line>\r\n<Input two type = \"file\" name = \"image\" onChange = {uploadFile} />\r\n<AddImg  />\r\n</Line>\r\n<Input value = {title} onChange = {(e)=>setTitle(e.target.value)} type = \"text\" placeholder = \"Title\" />\r\n<Btn type = \"submit\">Publish</Btn>\r\n\r\n            </PostTitle>\r\n\r\n            <PostDesc onChange = {(e)=>setDescription(e.target.value)} value = {description}\r\n                placeholder = \"Tell your story...\" >\r\n            </PostDesc>\r\n            <Select>\r\n                <Option value = \"sports\">Sports</Option>\r\n                <Option value = \"life\">Life</Option>\r\n                <Option value = \"tech\">Tech</Option>\r\n                <Option value = \"style\">Style</Option>\r\n                <Option value = \"music\">Music</Option>\r\n                <Option value = \"cinema\">Cinema</Option>\r\n                <Option value = \"entertainment\">Entertainment</Option>\r\n            </Select>\r\n        </PostContainer>\r\n        </>\r\n    )\r\n}\r\nexport default Post"]},"metadata":{},"sourceType":"module"}