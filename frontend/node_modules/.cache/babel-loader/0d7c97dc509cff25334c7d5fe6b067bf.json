{"ast":null,"code":"var _jsxFileName = \"E:\\\\blog\\\\frontend\\\\src\\\\pages\\\\post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { PostContainer, PostTitle, Input, AddImg, Btn, PostDesc, PostImg, Line, InputField } from \"./styles/postStyle\";\nimport { post } from \"./actions/postactions\";\nimport { Message } from \"./styles/loginstyle\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cate from \"./data/cate\";\nimport { Select, Option, SelectItem, Header, Down } from \"./styles/postStyle\";\nimport { data } from \"./data/categories\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Post = _ref => {\n  _s();\n\n  let {\n    two\n  } = _ref;\n  const [photo, setPhoto] = useState('');\n  const [title, setTitle] = useState('');\n  const [success, setSuccess] = useState('');\n  const [description, setDescription] = useState('');\n  const [click, setClick] = useState(false);\n  const [category, setCategory] = useState(\"\");\n  const [choose, setChoose] = useState(false);\n  const categories = [];\n  const dispatch = useDispatch();\n  const userInfo = useSelector(state => state.blog.userInfo);\n  const navigate = useNavigate();\n\n  const uploadFile = async e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append(\"image\", file);\n    const {\n      data\n    } = await axios.post('/api/upload', bodyFormData, {\n      headers: {\n        \"Content-Type\": \"multiformat/formdata\",\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    setPhoto(`/images/${data.slice(24, data.length)}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(post({\n      username: userInfo.username,\n      title,\n      description,\n      photo\n    }, userInfo));\n    setSuccess(\"Your story has been posted successfully!\");\n    if (category) categories.push(category);\n  };\n\n  useEffect(() => {\n    if (!userInfo) navigate(\"/login\");\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [success && /*#__PURE__*/_jsxDEV(Message, {\n      two: true,\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(PostContainer, {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(PostImg, {\n        two: two,\n        src: photo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PostTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Line, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            two: true,\n            type: \"file\",\n            name: \"image\",\n            onChange: uploadFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(AddImg, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          type: \"text\",\n          placeholder: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(Btn, {\n          type: \"submit\",\n          children: \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PostDesc, {\n        onChange: e => setDescription(e.target.value),\n        value: description,\n        placeholder: \"Tell your story...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          onClick: () => setChoose(!choose),\n          children: \"Choose Category: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [data.map(cat => /*#__PURE__*/_jsxDEV(Cate, {\n            cat: cat,\n            click: click,\n            choose: choose,\n            categories: categories\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this)), !choose && /*#__PURE__*/_jsxDEV(Select, {\n            two: true,\n            onClick: () => setChoose(!choose),\n            children: /*#__PURE__*/_jsxDEV(Option, {\n              children: [\"Categories \", /*#__PURE__*/_jsxDEV(Down, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 24\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), choose && /*#__PURE__*/_jsxDEV(Select, {\n            onClick: () => setClick(true),\n            children: /*#__PURE__*/_jsxDEV(Option, {\n              children: \"Others \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 12\n          }, this), click && /*#__PURE__*/_jsxDEV(InputField, {\n            placeholder: \"Enter category\",\n            type: \"text\",\n            value: category,\n            onChange: e => setCategory(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Post, \"busIvZ9VOOOgcXeU+ZRadPl+MlI=\", false, function () {\n  return [useDispatch, useSelector, useNavigate];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["E:/blog/frontend/src/pages/post.js"],"names":["React","useState","useEffect","axios","useSelector","useDispatch","PostContainer","PostTitle","Input","AddImg","Btn","PostDesc","PostImg","Line","InputField","post","Message","useNavigate","Cate","Select","Option","SelectItem","Header","Down","data","Post","two","photo","setPhoto","title","setTitle","success","setSuccess","description","setDescription","click","setClick","category","setCategory","choose","setChoose","categories","dispatch","userInfo","state","blog","navigate","uploadFile","e","file","target","files","bodyFormData","FormData","append","headers","Authorization","token","slice","length","submitHandler","preventDefault","username","push","value","map","cat"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\"\r\nimport axios from \"axios\"\r\nimport {useSelector,useDispatch} from \"react-redux\"\r\nimport {PostContainer,PostTitle,Input,AddImg,Btn,PostDesc,PostImg,Line,InputField} from \"./styles/postStyle\"\r\nimport {post} from \"./actions/postactions\"\r\nimport { Message } from \"./styles/loginstyle\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport Cate from \"./data/cate\"\r\nimport {Select,Option,SelectItem,Header,Down} from \"./styles/postStyle\"\r\nimport { data } from \"./data/categories\"\r\nconst Post = ({two}) =>{\r\n    const [photo,setPhoto] = useState('')\r\n    const [title,setTitle] = useState('')\r\n    const [success,setSuccess] = useState('')\r\n    const [description,setDescription] = useState('')\r\n    const [click,setClick] = useState(false)\r\n    const [category,setCategory] = useState(\"\")\r\n    const [choose,setChoose] = useState(false)\r\n    const categories = []\r\n    const dispatch = useDispatch()\r\n    const userInfo = useSelector(state=>state.blog.userInfo)\r\nconst navigate = useNavigate()\r\nconst uploadFile = async(e) =>{\r\n    const file = e.target.files[0]\r\n    const bodyFormData = new FormData()\r\n    bodyFormData.append(\"image\",file)\r\n    const {data} = await axios.post('/api/upload',bodyFormData,{\r\nheaders:{\r\n    \"Content-Type\":\"multiformat/formdata\",\r\n    Authorization:`Bearer ${userInfo.token}`\r\n}\r\n    })\r\n    setPhoto(`/images/${data.slice(24,data.length)}`)\r\n}\r\nconst submitHandler = (e) =>{\r\n    e.preventDefault()\r\ndispatch(post({\r\n    username:userInfo.username,\r\n    title,\r\n    description,\r\n    photo\r\n},userInfo))\r\nsetSuccess(\"Your story has been posted successfully!\")\r\nif(category) categories.push(category)\r\n\r\n}\r\n\r\nuseEffect(()=>{\r\n  if(!userInfo) navigate(\"/login\")\r\n},[])\r\n\r\n    return(<>\r\n    {success && <Message two >{success}</Message>}\r\n        <PostContainer onSubmit = {submitHandler}>\r\n            <PostImg two = {two} src = {photo}  />\r\n\r\n            <PostTitle>\r\n                <Line>\r\n<Input two type = \"file\" name = \"image\" onChange = {uploadFile} />\r\n<AddImg  />\r\n</Line>\r\n<Input value = {title} onChange = {(e)=>setTitle(e.target.value)} type = \"text\" placeholder = \"Title\" />\r\n<Btn type = \"submit\">Publish</Btn>\r\n\r\n            </PostTitle>\r\n\r\n            <PostDesc onChange = {(e)=>setDescription(e.target.value)} value = {description}\r\n                placeholder = \"Tell your story...\" >\r\n            </PostDesc>\r\n            <SelectItem>\r\n                <Header onClick = {()=>setChoose(!choose)}>Choose Category: </Header>\r\n                <div>\r\n            {data.map(cat=>(\r\n                <Cate cat = {cat} click = {click} choose = {choose} categories = {categories} />\r\n            ))}\r\n            {!choose && <Select two onClick = {()=>setChoose(!choose)}>\r\n    <Option>Categories <Down /></Option>\r\n</Select>}\r\n{choose && <Select onClick = {()=>setClick(true)} >\r\n    <Option>Others </Option>\r\n</Select>}\r\n{click&& <InputField placeholder = \"Enter category\" type = \"text\" value = {category} onChange = {(e)=>setCategory(e.target.value)} />}\r\n</div>\r\n            </SelectItem>\r\n        </PostContainer>\r\n        </>\r\n    )\r\n}\r\nexport default Post"]},"metadata":{},"sourceType":"module"}