{"ast":null,"code":"import axios from \"axios\";\nimport { errorPost, loadPost, postBlog, getPosts, getBlog, errorBlog, loadBlog, editE, editL } from \"../../utils/store\";\nexport const post = (_ref, userInfo) => {\n  let {\n    username,\n    title,\n    description,\n    photo\n  } = _ref;\n  return async dispatch => {\n    const {\n      data\n    } = await axios.post(\"/api/post\", {\n      username,\n      title,\n      description,\n      photo\n    }, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch(postBlog({\n      post: data\n    }));\n  };\n};\nexport const fetchPosts = () => async dispatch => {\n  dispatch(loadPost({\n    load: true\n  }));\n\n  try {\n    const {\n      data\n    } = await axios.get(\"/api/post\");\n    dispatch(getPosts({\n      posts: data.posts\n    }));\n    dispatch(loadPost({\n      load: false\n    }));\n  } catch (error) {\n    dispatch(loadPost({\n      load: false\n    }));\n    dispatch(errorPost({\n      error: error.response && error.response.data.message ? error.response.data.message : error.message\n    }));\n  }\n};\nexport const fetchBlog = id => async dispatch => {\n  dispatch(loadBlog({\n    loadB: true\n  }));\n\n  try {\n    const {\n      data\n    } = await axios.get(`/api/post/${id}`);\n    dispatch(getBlog({\n      blog: data.post\n    }));\n    dispatch(loadBlog({\n      loadB: false\n    }));\n  } catch (error) {\n    dispatch(loadBlog({\n      loadB: false\n    }));\n    dispatch(errorBlog({\n      errorB: error.response && error.response.data.message ? error.response.data.message : error.message\n    }));\n  }\n};\nexport const editPost = (_ref2, id, userInfo) => {\n  let {\n    username,\n    title,\n    description,\n    photo,\n    categories\n  } = _ref2;\n  return async dispatch => {\n    dispatch(editL({\n      editLoad: true\n    }));\n\n    try {\n      const {\n        data\n      } = await axios.put(`/api/post/${id}`, {\n        username,\n        title,\n        description,\n        photo,\n        categories\n      }, {\n        headers: {\n          Authorization: `Bearer ${userInfo.token}`\n        }\n      });\n      dispatch(editL({\n        editLoad: false\n      }));\n      dispatch(getBlog({\n        blog: data\n      }));\n    } catch (error) {\n      dispatch(editL({\n        editLoad: false\n      }));\n      dispatch(editE({\n        editErr: error.response && error.response.data.message ? error.response.data.message : error.message\n      }));\n    }\n  };\n};\nexport const deletePost = (_ref3, userInfo) => {\n  let {\n    id\n  } = _ref3;\n  return async dispatch => {\n    await axios.delete(`/api/post/${id}`, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n  };\n};","map":{"version":3,"sources":["E:/blog/frontend/src/pages/actions/postactions.js"],"names":["axios","errorPost","loadPost","postBlog","getPosts","getBlog","errorBlog","loadBlog","editE","editL","post","userInfo","username","title","description","photo","dispatch","data","headers","Authorization","token","fetchPosts","load","get","posts","error","response","message","fetchBlog","id","loadB","blog","errorB","editPost","categories","editLoad","put","editErr","deletePost","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\"\r\nimport {errorPost,loadPost,postBlog,getPosts,getBlog,errorBlog,loadBlog,editE,editL} from \"../../utils/store\"\r\nexport const post = ({username,title,description,photo},userInfo) =>async(dispatch) =>{\r\n\r\n    const {data} = await axios.post(\"/api/post\",{username,title,description,photo},{\r\n        headers:{\r\n            Authorization: `Bearer ${userInfo.token}`\r\n        }\r\n    })\r\n    dispatch(postBlog({post:data}))\r\n\r\n}\r\nexport const fetchPosts = () =>async(dispatch) =>{\r\n    dispatch(loadPost({load:true}))\r\n    try{\r\n        const {data} = await axios.get(\"/api/post\")\r\n        dispatch(getPosts({posts:data.posts}))\r\n        dispatch(loadPost({load:false}))\r\n    \r\n    }\r\n    catch(error){\r\n        dispatch(loadPost({load:false}))\r\n    dispatch(errorPost({error:error.response && error.response.data.message?error.response.data.message:error.message}))\r\n    }\r\n    }\r\n    export const fetchBlog = (id) =>async(dispatch) =>{\r\n        dispatch(loadBlog({loadB:true}))\r\n    try{\r\n        const {data} = await axios.get(`/api/post/${id}`)\r\n        dispatch(getBlog({blog:data.post}))\r\n        dispatch(loadBlog({loadB:false}))\r\n    \r\n    }\r\n    catch(error){\r\n        dispatch(loadBlog({loadB:false}))\r\n    dispatch(errorBlog({errorB:error.response && error.response.data.message?error.response.data.message:error.message}))\r\n    } \r\n    }\r\n    export const editPost = ({username,title,description,photo,categories},id,userInfo) =>async(dispatch)=>{\r\n        dispatch(editL({editLoad:true}))\r\n        try{\r\nconst {data} = await axios.put(`/api/post/${id}`,{username,title,description,photo,categories},{\r\n    headers:{\r\n        Authorization:`Bearer ${userInfo.token}`\r\n    }\r\n})\r\ndispatch(editL({editLoad:false}))\r\ndispatch(getBlog({blog:data}))\r\n        }\r\n        catch(error){\r\n            dispatch(editL({editLoad:false}))\r\n            dispatch(editE({editErr:error.response && error.response.data.message?error.response.data.message:error.message}))\r\n\r\n        }\r\n    }\r\n    export const deletePost = ({id},userInfo) =>async(dispatch)=>{\r\nawait axios.delete(`/api/post/${id}`,{\r\n    headers:{\r\n        Authorization:`Bearer ${userInfo.token}`\r\n    }\r\n})\r\n    }"]},"metadata":{},"sourceType":"module"}