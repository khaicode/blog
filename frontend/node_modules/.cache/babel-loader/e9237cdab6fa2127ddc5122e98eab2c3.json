{"ast":null,"code":"import axios from \"axios\";\nimport { login, errorSignin, registerError, updateLoad, updateErr } from \"../../utils/store\";\nexport const signin = (_ref, navigate) => {\n  let {\n    email,\n    password\n  } = _ref;\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await axios.post('/api/users/signin', {\n        email,\n        password\n      });\n      dispatch(login({\n        userInfo: data\n      }));\n      navigate('/');\n    } catch (error) {\n      dispatch(errorSignin({\n        errorUser: error.response && error.response.data.message ? error.response.data.message : error.message\n      }));\n    }\n  };\n};\nexport const register = (_ref2, navigate) => {\n  let {\n    username,\n    email,\n    password\n  } = _ref2;\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await axios.post('/api/users/register', {\n        username,\n        email,\n        password\n      });\n      dispatch(login({\n        userInfo: data\n      }));\n      navigate('/');\n    } catch (error) {\n      dispatch(registerError({\n        errorRequest: error.response && error.response.data.message ? error.response.data.message : error.message\n      }));\n    }\n  };\n};\nexport const signout = () => async dispatch => {\n  dispatch(login({\n    userInfo: null\n  }));\n  localStorage.removeItem(\"userInfo\");\n  document.location.href = \"/login\";\n};\nexport const updateUser = (user, userInfo) => async dispatch => {\n  dispatch(updateLoad({\n    loadUpdate: true\n  }));\n\n  try {\n    const {\n      data\n    } = await axios.put('/api/users/profile', user, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch(login({\n      userInfo: data.updatedUser\n    }));\n    dispatch(updateLoad({\n      loadUpdate: false\n    }));\n  } catch (error) {\n    dispatch(updateLoad({\n      loadUpdate: false\n    }));\n    dispatch(updateErr({\n      errorUpdate: error.response && error.response.data.message ? error.response.data.message : error.message\n    }));\n  }\n};","map":{"version":3,"sources":["E:/blog/frontend/src/pages/actions/useractions.js"],"names":["axios","login","errorSignin","registerError","updateLoad","updateErr","signin","navigate","email","password","dispatch","data","post","userInfo","error","errorUser","response","message","register","username","errorRequest","signout","localStorage","removeItem","document","location","href","updateUser","user","loadUpdate","put","headers","Authorization","token","updatedUser","errorUpdate"],"mappings":"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","sourcesContent":["import axios from \"axios\"\r\nimport  {login,errorSignin,registerError,updateLoad,updateErr} from \"../../utils/store\"\r\nexport const signin = ({email,password},navigate) =>async(dispatch)=>{\r\ntry{\r\n    const {data} = await axios.post('/api/users/signin',{email,password})\r\n    dispatch(login({userInfo:data}))\r\nnavigate('/')\r\n}\r\ncatch(error){\r\n  dispatch(errorSignin({errorUser:error.response && error.response.data.message ?error.response.data.message :error.message}))\r\n}\r\n}\r\nexport const register = ({username,email,password},navigate) =>async(dispatch)=>{\r\n  try{\r\n      const {data} = await axios.post('/api/users/register',{username,email,password})\r\n      dispatch(login({userInfo:data}))\r\n  navigate('/')\r\n  }\r\n  catch(error){\r\n    dispatch(registerError({errorRequest:error.response && error.response.data.message ?error.response.data.message :error.message}))\r\n  }\r\n  }\r\n  export const signout = () =>async(dispatch) =>{\r\n    dispatch(login({userInfo:null}))\r\n    localStorage.removeItem(\"userInfo\")\r\n    document.location.href = \"/login\"\r\n  }\r\n  export const updateUser = (user,userInfo) =>async(dispatch) =>{\r\n    dispatch(updateLoad({loadUpdate:true}))\r\n    try{\r\n      const {data} = await axios.put('/api/users/profile',user,{\r\n        headers:{\r\n          Authorization:`Bearer ${userInfo.token}`\r\n        }\r\n      })\r\n      dispatch(login({userInfo:data.updatedUser}))\r\n      dispatch(updateLoad({loadUpdate:false}))\r\n\r\n    }\r\n    catch(error){\r\n      dispatch(updateLoad({loadUpdate:false}))\r\n      dispatch(updateErr({errorUpdate:error.response && error.response.data.message ?error.response.data.message :error.message}))\r\n\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}